# ğŸ—ï¸ REFONTE COMPLÃˆTE - Page UnifiÃ©e de Suivi de Dossier d'Achat

**Date**: 29 Octobre 2025  
**Objectif**: CrÃ©er UNE seule page de suivi pour TOUS les acteurs

---

## ğŸ‘¥ LES 5 ACTEURS DU DOSSIER

### 1. ğŸ  **ACHETEUR** (Particulier/Entreprise)
**RÃ´le**: Initie la demande d'achat
**Besoins**:
- Voir progression du dossier
- Communiquer avec vendeur/notaire/agent/gÃ©omÃ¨tre
- Uploader documents (piÃ¨ces identitÃ©, justificatifs revenus, etc.)
- Suivre financement bancaire
- Planifier rendez-vous
- Payer (acomptes, frais notaire, frais agent, etc.)

---

### 2. ğŸ˜ï¸ **VENDEUR** (PropriÃ©taire)
**RÃ´le**: PropriÃ©taire de la parcelle
**Besoins**:
- Recevoir notifications demandes d'achat
- Accepter/refuser offres
- NÃ©gocier prix
- Uploader documents parcelle (titre foncier, bornage, etc.)
- Communiquer avec acheteur/notaire/agent
- Suivre paiement
- Confirmer transfert propriÃ©tÃ©

---

### 3. âš–ï¸ **NOTAIRE**
**RÃ´le**: Authentifier la vente, rÃ©diger actes
**Besoins**:
- Voir tous ses dossiers assignÃ©s
- VÃ©rifier identitÃ©s parties
- Valider documents lÃ©gaux
- RÃ©diger contrat de vente
- Planifier signature
- Calculer frais notariaux
- Confirmer paiement reÃ§u
- Enregistrer acte authentique

**Quand intervient**: AprÃ¨s accord acheteur-vendeur

---

### 4. ğŸ¢ **AGENT FONCIER** âš ï¸ FACULTATIF (Choix de l'acheteur)
**RÃ´le**: Faciliter transaction, intermÃ©diaire
**Besoins**:
- Voir dossiers dont il est agent
- Accompagner acheteur dans recherche
- Organiser visites terrain
- NÃ©gocier entre parties
- Collecter documents
- Suivre commission (gÃ©nÃ©ralement 5% du prix)
- Statut paiement commission

**Quand intervient**: DÃ¨s le dÃ©but (souvent avant demande d'achat)
**Note**: L'acheteur dÃ©cide s'il veut faire appel Ã  un agent ou non

---

### 5. ğŸ“ **GÃ‰OMÃˆTRE** âš ï¸ FACULTATIF (Choix de l'acheteur)
**RÃ´le**: Mesurer, borner, certifier limites parcelle
**Besoins**:
- Recevoir missions de bornage
- Planifier RDV terrain
- Uploader plan de bornage
- Uploader certificat topographique
- Valider coordonnÃ©es GPS
- Facturer prestations (bornage, plans, etc.)

**Quand intervient**: Avant ou pendant la vente (selon demande)
**Note**: L'acheteur dÃ©cide s'il veut faire appel Ã  un gÃ©omÃ¨tre pour vÃ©rifier le bornage

---

## ğŸ”„ WORKFLOW COMPLET AVEC TOUS LES ACTEURS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 0: PRÃ‰PARATION (Optionnel - Si agent foncier)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ‘¤ ACHETEUR dÃ©cide: "Je veux un agent foncier pour m'aider ?"      â”‚
â”‚                                                                      â”‚
â”‚ SI OUI:                                                              â”‚
â”‚    ğŸ‘¤ ACHETEUR contacte ğŸ¢ AGENT FONCIER                            â”‚
â”‚    ğŸ¢ AGENT recherche parcelles disponibles                         â”‚
â”‚    ğŸ¢ AGENT organise visite avec VENDEUR                            â”‚
â”‚    ğŸ‘¤ ACHETEUR visite terrain                                       â”‚
â”‚                                                                      â”‚
â”‚ SI NON:                                                              â”‚
â”‚    ğŸ‘¤ ACHETEUR cherche directement sur la plateforme                â”‚
â”‚    ğŸ‘¤ ACHETEUR contacte VENDEUR directement                         â”‚
â”‚                                                                      â”‚
â”‚ âš ï¸ BORNAGE (DÃ©cision de l'acheteur):                                â”‚
â”‚    ğŸ‘¤ ACHETEUR dÃ©cide: "Je veux vÃ©rifier le bornage ?"             â”‚
â”‚                                                                      â”‚
â”‚    SI OUI:                                                           â”‚
â”‚       ğŸ‘¤ ACHETEUR mandate ğŸ“ GÃ‰OMÃˆTRE                               â”‚
â”‚       ğŸ“ GÃ‰OMÃˆTRE fait bornage + plan                               â”‚
â”‚       ğŸ“ GÃ‰OMÃˆTRE upload certificat topographique                   â”‚
â”‚                                                                      â”‚
â”‚    SI NON:                                                           â”‚
â”‚       ğŸ˜ï¸ VENDEUR fournit documents bornage existants (si disponible)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 1: DEMANDE D'ACHAT                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ‘¤ ACHETEUR fait demande d'achat (purchase_request)                â”‚
â”‚    â†’ Prix proposÃ©                                                   â”‚
â”‚    â†’ Via agent ou direct                                            â”‚
â”‚    â†’ CrÃ©er purchase_case (dossier)                                 â”‚
â”‚                                                                      â”‚
â”‚ ğŸ”” Notification â†’ ğŸ˜ï¸ VENDEUR                                       â”‚
â”‚ ğŸ”” Notification â†’ ğŸ¢ AGENT (si mentionnÃ©)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 2: NÃ‰GOCIATION                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ˜ï¸ VENDEUR voit demande                                            â”‚
â”‚                                                                      â”‚
â”‚ Option A: Accepte directement                                       â”‚
â”‚ Option B: Contre-offre (nouveau prix)                               â”‚
â”‚ Option C: Refuse                                                    â”‚
â”‚                                                                      â”‚
â”‚ ğŸ¢ AGENT FONCIER facilite nÃ©gociation (si prÃ©sent)                 â”‚
â”‚    â†’ Messages tripartites                                           â”‚
â”‚    â†’ Conseils prix marchÃ©                                           â”‚
â”‚                                                                      â”‚
â”‚ âœ… Accord trouvÃ© â†’ Status: 'preliminary_agreement'                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 3: CHOIX DU NOTAIRE                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¯ SystÃ¨me propose TOP 3 notaires (algorithme scoring)             â”‚
â”‚                                                                      â”‚
â”‚ ğŸ‘¤ ACHETEUR choisit notaire â†’ Approuve                             â”‚
â”‚ ğŸ˜ï¸ VENDEUR approuve le choix                                       â”‚
â”‚ ğŸ”” Notification â†’ âš–ï¸ NOTAIRE (24h pour accepter)                   â”‚
â”‚ âš–ï¸ NOTAIRE accepte â†’ Status: 'notary_assigned'                     â”‚
â”‚                                                                      â”‚
â”‚ ğŸ”” Notifications â†’ Tous les acteurs                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 4: VÃ‰RIFICATIONS DOCUMENTS                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ‘¤ ACHETEUR upload:                                                 â”‚
â”‚    - PiÃ¨ce identitÃ© (CNI/Passeport)                                â”‚
â”‚    - Justificatif domicile                                          â”‚
â”‚    - Justificatif revenus (si financement)                         â”‚
â”‚                                                                      â”‚
â”‚ ğŸ˜ï¸ VENDEUR upload:                                                 â”‚
â”‚    - Titre foncier                                                  â”‚
â”‚    - Quitus fiscal                                                  â”‚
â”‚    - Certificat de bornage (fourni par gÃ©omÃ¨tre)                   â”‚
â”‚    - Certificat de non-hypothÃ¨que                                  â”‚
â”‚                                                                      â”‚
â”‚ ğŸ“ GÃ‰OMÃˆTRE upload (si mission):                                   â”‚
â”‚    - Plan de bornage officiel                                       â”‚
â”‚    - Certificat topographique                                       â”‚
â”‚    - CoordonnÃ©es GPS limites                                        â”‚
â”‚    - Photos terrain                                                 â”‚
â”‚                                                                      â”‚
â”‚ âš–ï¸ NOTAIRE vÃ©rifie tous les documents                              â”‚
â”‚    â†’ Valide identitÃ©s                                               â”‚
â”‚    â†’ VÃ©rifie titre foncier au cadastre                             â”‚
â”‚    â†’ ContrÃ´le bornage                                               â”‚
â”‚    â†’ Status: 'document_audit'                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 5: PAIEMENT DIRECT (SimplifiÃ© - Pas de financement)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš ï¸ Note: Le financement bancaire et paiement Ã©chelonnÃ© sont gÃ©rÃ©s  â”‚
â”‚          dans un workflow sÃ©parÃ©. Ici on traite le PAIEMENT DIRECT. â”‚
â”‚                                                                      â”‚
â”‚ ğŸ’° PAIEMENT 1: Acompte (10-20% gÃ©nÃ©ralement)                        â”‚
â”‚    ğŸ‘¤ ACHETEUR â†’ ğŸ˜ï¸ VENDEUR                                        â”‚
â”‚    Status: En attente / PayÃ©                                        â”‚
â”‚    â†’ Preuve de paiement uploadÃ©e                                    â”‚
â”‚                                                                      â”‚
â”‚ ğŸ’° PAIEMENT 2: Frais notaire                                       â”‚
â”‚    ğŸ‘¤ ACHETEUR â†’ âš–ï¸ NOTAIRE                                         â”‚
â”‚    Montant: [calculÃ© par notaire]                                  â”‚
â”‚    â†’ ReÃ§u notaire uploadÃ©                                           â”‚
â”‚                                                                      â”‚
â”‚ ğŸ’° PAIEMENT 3: Commission agent (si applicable - facultatif)        â”‚
â”‚    ğŸ‘¤ ACHETEUR â†’ ğŸ¢ AGENT FONCIER                                  â”‚
â”‚    Montant: 5% du prix gÃ©nÃ©ralement                                â”‚
â”‚    â†’ Seulement si l'acheteur a choisi un agent                     â”‚
â”‚                                                                      â”‚
â”‚ ğŸ’° PAIEMENT 4: Frais gÃ©omÃ¨tre (si applicable - facultatif)          â”‚
â”‚    ğŸ‘¤ ACHETEUR â†’ ğŸ“ GÃ‰OMÃˆTRE                                        â”‚
â”‚    Montant: Bornage + Plans + Certificat                           â”‚
â”‚    â†’ Seulement si l'acheteur a demandÃ© un bornage                  â”‚
â”‚                                                                      â”‚
â”‚ ğŸ’° PAIEMENT 5: Solde                                               â”‚
â”‚    ğŸ‘¤ ACHETEUR â†’ ğŸ˜ï¸ VENDEUR                                        â”‚
â”‚    Montant: Prix total - Acompte                                    â”‚
â”‚    Mode: Virement bancaire / ChÃ¨que certifiÃ© / SÃ©questre notaire   â”‚
â”‚    â†’ Preuve de virement uploadÃ©e                                    â”‚
â”‚                                                                      â”‚
â”‚ âœ… Tous paiements confirmÃ©s â†’ Status: 'payment_completed'          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš–ï¸ NOTAIRE rÃ©dige projet d'acte de vente                           â”‚
â”‚    â†’ IdentitÃ©s parties                                              â”‚
â”‚    â†’ Description parcelle (avec donnÃ©es gÃ©omÃ¨tre)                  â”‚
â”‚    â†’ Prix et conditions paiement                                    â”‚
â”‚    â†’ Clauses spÃ©ciales                                              â”‚
â”‚                                                                      â”‚
â”‚ ğŸ”” Notification â†’ ACHETEUR + VENDEUR                               â”‚
â”‚ ğŸ‘¤ ACHETEUR relit contrat                                          â”‚
â”‚ ğŸ˜ï¸ VENDEUR relit contrat                                          â”‚
â”‚                                                                      â”‚
â”‚ âš ï¸ Si modifications â†’ Retour notaire                               â”‚
â”‚ âœ… Contrat validÃ© par les 2 parties                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 7: RENDEZ-VOUS SIGNATURE                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš–ï¸ NOTAIRE propose dates RDV signature                             â”‚
â”‚                                                                      â”‚
â”‚ ğŸ‘¤ ACHETEUR confirme disponibilitÃ©                                 â”‚
â”‚ ğŸ˜ï¸ VENDEUR confirme disponibilitÃ©                                 â”‚
â”‚                                                                      â”‚
â”‚ ğŸ”” RDV confirmÃ© â†’ Tous les acteurs                                 â”‚
â”‚    ğŸ“… Date: [JJ/MM/AAAA]                                           â”‚
â”‚    ğŸ• Heure: [HH:MM]                                               â”‚
â”‚    ğŸ“ Lieu: Office notarial                                         â”‚
â”‚                                                                      â”‚
â”‚ âš ï¸ RAPPEL automatique 48h avant                                    â”‚
â”‚ âš ï¸ RAPPEL automatique 24h avant                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“

                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 6: RÃ‰DACTION CONTRAT                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“… JOUR J - RDV Ã  l'office notarial                                â”‚
â”‚                                                                      â”‚
â”‚ PrÃ©sents:                                                            â”‚
â”‚    ğŸ‘¤ ACHETEUR (+ piÃ¨ce identitÃ© originale)                        â”‚
â”‚    ğŸ˜ï¸ VENDEUR (+ piÃ¨ce identitÃ© originale)                        â”‚
â”‚    âš–ï¸ NOTAIRE                                                       â”‚
â”‚    ğŸ¢ AGENT FONCIER (optionnel)                                    â”‚
â”‚                                                                      â”‚
â”‚ âš–ï¸ NOTAIRE lit l'acte aux parties                                  â”‚
â”‚ âš–ï¸ NOTAIRE explique clauses                                        â”‚
â”‚                                                                      â”‚
â”‚ âœï¸ ACHETEUR signe                                                  â”‚
â”‚ âœï¸ VENDEUR signe                                                   â”‚
â”‚ âœï¸ NOTAIRE authentifie signatures                                  â”‚
â”‚                                                                      â”‚
â”‚ ğŸ“„ Acte de vente authentique gÃ©nÃ©rÃ©                                â”‚
â”‚ Status: 'signing_process' â†’ 'property_transfer'                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 7: RENDEZ-VOUS SIGNATURE                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš–ï¸ NOTAIRE fait formalitÃ©s:                                        â”‚
â”‚    â†’ Enregistrement acte aux impÃ´ts                                 â”‚
â”‚    â†’ Inscription conservation fonciÃ¨re                              â”‚
â”‚    â†’ Publication changement propriÃ©taire                            â”‚
â”‚    â†’ Mise Ã  jour cadastre                                           â”‚
â”‚                                                                      â”‚
â”‚ ğŸ“„ NOTAIRE remet copies acte:                                      â”‚
â”‚    â†’ Copie authentique ACHETEUR                                     â”‚
â”‚    â†’ Copie authentique VENDEUR                                      â”‚
â”‚    â†’ Copie pour archives                                            â”‚
â”‚                                                                      â”‚
â”‚ ğŸ¢ AGENT FONCIER reÃ§oit commission (si pas encore payÃ©e)          â”‚
â”‚                                                                      â”‚
â”‚ âœ… Transfert propriÃ©tÃ© effectif                                    â”‚
â”‚ Status: 'completed'                                                 â”‚
â”‚                                                                      â”‚
â”‚ ğŸ”” Notifications finales â†’ Tous les acteurs                        â”‚
â”‚                                                                      â”‚
â”‚ ğŸ‰ VENTE TERMINÃ‰E !                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 8: SIGNATURE ACTE                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“… JOUR J - RDV Ã  l'office notarial                                â”‚
â”‚                                                                      â”‚
â”‚ PrÃ©sents:                                                            â”‚
â”‚    ğŸ‘¤ ACHETEUR (+ piÃ¨ce identitÃ© originale)                        â”‚
â”‚    ğŸ˜ï¸ VENDEUR (+ piÃ¨ce identitÃ© originale)                        â”‚
â”‚    âš–ï¸ NOTAIRE                                                       â”‚
â”‚    ğŸ¢ AGENT FONCIER (optionnel - si prÃ©sent dans le dossier)       â”‚
â”‚                                                                      â”‚
â”‚ âš–ï¸ NOTAIRE lit l'acte aux parties                                  â”‚
â”‚ âš–ï¸ NOTAIRE explique clauses                                        â”‚
â”‚                                                                      â”‚
â”‚ âœï¸ ACHETEUR signe                                                  â”‚
â”‚ âœï¸ VENDEUR signe                                                   â”‚
â”‚ âœï¸ NOTAIRE authentifie signatures                                  â”‚
â”‚                                                                      â”‚
â”‚ ğŸ“„ Acte de vente authentique gÃ©nÃ©rÃ©                                â”‚
â”‚ Status: 'signing_process' â†’ 'property_transfer'                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 9: FORMALITÃ‰S POST-SIGNATURE                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš–ï¸ NOTAIRE fait formalitÃ©s:                                        â”‚
â”‚    â†’ Enregistrement acte aux impÃ´ts                                 â”‚
â”‚    â†’ Inscription conservation fonciÃ¨re                              â”‚
â”‚    â†’ Publication changement propriÃ©taire                            â”‚
â”‚    â†’ Mise Ã  jour cadastre                                           â”‚
â”‚                                                                      â”‚
â”‚ ğŸ“„ NOTAIRE remet copies acte:                                      â”‚
â”‚    â†’ Copie authentique ACHETEUR                                     â”‚
â”‚    â†’ Copie authentique VENDEUR                                      â”‚
â”‚    â†’ Copie pour archives                                            â”‚
â”‚                                                                      â”‚
â”‚ ğŸ¢ AGENT FONCIER reÃ§oit commission (si prÃ©sent et pas encore payÃ©) â”‚
â”‚                                                                      â”‚
â”‚ âœ… Transfert propriÃ©tÃ© effectif                                    â”‚
â”‚ Status: 'completed'                                                 â”‚
â”‚                                                                      â”‚
â”‚ ğŸ”” Notifications finales â†’ Tous les acteurs                        â”‚
â”‚                                                                      â”‚
â”‚ ğŸ‰ VENTE TERMINÃ‰E !                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 10: Ã‰VALUATIONS (Optionnel)                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ‘¤ ACHETEUR peut Ã©valuer:                                          â”‚
â”‚    â†’ âš–ï¸ NOTAIRE (professionnalisme, rapiditÃ©)                     â”‚
â”‚    â†’ ğŸ¢ AGENT FONCIER (si utilisÃ©)                                â”‚
â”‚    â†’ ğŸ“ GÃ‰OMÃˆTRE (si utilisÃ©)                                     â”‚
â”‚    â†’ ğŸ˜ï¸ VENDEUR (communication)                                   â”‚
â”‚                                                                      â”‚
â”‚ ğŸ˜ï¸ VENDEUR peut Ã©valuer:                                          â”‚
â”‚    â†’ âš–ï¸ NOTAIRE                                                    â”‚
â”‚    â†’ ğŸ¢ AGENT FONCIER (si utilisÃ©)                                â”‚
â”‚    â†’ ğŸ‘¤ ACHETEUR (sÃ©rieux, ponctualitÃ©)                           â”‚
â”‚                                                                      â”‚
â”‚ â­ Reviews publiÃ©es sur profils                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ MODIFICATIONS BASE DE DONNÃ‰ES

### Table `purchase_cases` - Ajouts

```sql
ALTER TABLE purchase_cases
ADD COLUMN IF NOT EXISTS agent_foncier_id UUID REFERENCES profiles(id),
ADD COLUMN IF NOT EXISTS geometre_id UUID REFERENCES profiles(id),
ADD COLUMN IF NOT EXISTS agent_assigned_at TIMESTAMP,
ADD COLUMN IF NOT EXISTS geometre_assigned_at TIMESTAMP,
ADD COLUMN IF NOT EXISTS agent_commission DECIMAL(12, 2),
ADD COLUMN IF NOT EXISTS agent_commission_paid BOOLEAN DEFAULT false,
ADD COLUMN IF NOT EXISTS geometre_fees DECIMAL(12, 2),
ADD COLUMN IF NOT EXISTS geometre_fees_paid BOOLEAN DEFAULT false,
ADD COLUMN IF NOT EXISTS has_agent BOOLEAN DEFAULT false, -- L'acheteur a choisi un agent
ADD COLUMN IF NOT EXISTS has_surveying BOOLEAN DEFAULT false, -- L'acheteur a demandÃ© un bornage
ADD COLUMN IF NOT EXISTS surveying_completed_at TIMESTAMP;

-- Index
CREATE INDEX IF NOT EXISTS idx_purchase_cases_agent 
ON purchase_cases(agent_foncier_id) WHERE agent_foncier_id IS NOT NULL;

CREATE INDEX IF NOT EXISTS idx_purchase_cases_geometre 
ON purchase_cases(geometre_id) WHERE geometre_id IS NOT NULL;

-- Commentaires
COMMENT ON COLUMN purchase_cases.has_agent IS 'L''acheteur a dÃ©cidÃ© de faire appel Ã  un agent foncier (facultatif)';
COMMENT ON COLUMN purchase_cases.has_surveying IS 'L''acheteur a demandÃ© un bornage par gÃ©omÃ¨tre (facultatif)';
```

### Table `agent_foncier_profiles`

```sql
CREATE TABLE IF NOT EXISTS agent_foncier_profiles (
  id UUID PRIMARY KEY REFERENCES profiles(id),
  
  -- Informations agence
  agency_name VARCHAR(255),
  agency_address TEXT,
  agency_region VARCHAR(100),
  license_number VARCHAR(100),
  is_verified BOOLEAN DEFAULT false,
  
  -- Commission
  commission_rate DECIMAL(5, 2) DEFAULT 5.00, -- 5%
  
  -- Performance
  total_sales_completed INTEGER DEFAULT 0,
  total_commission_earned DECIMAL(15, 2) DEFAULT 0,
  rating DECIMAL(3, 2) DEFAULT 0.00,
  reviews_count INTEGER DEFAULT 0,
  
  -- SpÃ©cialisations
  specializations TEXT[] DEFAULT ARRAY['terrain', 'immobilier'],
  zones_coverage TEXT[], -- RÃ©gions oÃ¹ l'agent opÃ¨re
  
  -- Contact
  phone VARCHAR(50),
  email VARCHAR(255),
  
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

### Table `geometre_profiles`

```sql
CREATE TABLE IF NOT EXISTS geometre_profiles (
  id UUID PRIMARY KEY REFERENCES profiles(id),
  
  -- Informations cabinet
  cabinet_name VARCHAR(255),
  cabinet_address TEXT,
  license_number VARCHAR(100),
  is_verified BOOLEAN DEFAULT false,
  
  -- Tarification
  bornage_fee DECIMAL(12, 2) DEFAULT 100000, -- 100k FCFA
  plan_fee DECIMAL(12, 2) DEFAULT 50000,
  certificate_fee DECIMAL(12, 2) DEFAULT 30000,
  
  -- Performance
  total_missions_completed INTEGER DEFAULT 0,
  rating DECIMAL(3, 2) DEFAULT 0.00,
  reviews_count INTEGER DEFAULT 0,
  average_completion_days DECIMAL(6, 2),
  
  -- Ã‰quipement
  has_gps BOOLEAN DEFAULT true,
  has_drone BOOLEAN DEFAULT false,
  has_total_station BOOLEAN DEFAULT true,
  
  -- Contact
  phone VARCHAR(50),
  email VARCHAR(255),
  
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

### Table `surveying_missions` (Missions gÃ©omÃ¨tre)

```sql
CREATE TABLE IF NOT EXISTS surveying_missions (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  
  case_id UUID REFERENCES purchase_cases(id),
  geometre_id UUID REFERENCES profiles(id),
  parcelle_id UUID REFERENCES parcels(id),
  
  -- Type de mission
  mission_type VARCHAR(50), -- 'bornage', 'plan', 'certificat', 'complete'
  
  -- Status
  status VARCHAR(50) DEFAULT 'pending',
  
  -- Dates
  requested_at TIMESTAMP DEFAULT NOW(),
  scheduled_date DATE,
  completed_at TIMESTAMP,
  
  -- Livrables
  plan_url TEXT,
  certificate_url TEXT,
  photos_urls TEXT[],
  gps_coordinates JSONB,
  
  -- Tarif
  quoted_fee DECIMAL(12, 2),
  paid BOOLEAN DEFAULT false,
  paid_at TIMESTAMP,
  
  -- Notes
  geometre_notes TEXT,
  client_notes TEXT,
  
  CONSTRAINT valid_mission_type CHECK (mission_type IN 
    ('bornage', 'plan', 'certificat', 'verification', 'complete')
  ),
  CONSTRAINT valid_mission_status CHECK (status IN 
    ('pending', 'scheduled', 'in_progress', 'completed', 'cancelled')
  )
);
```

---

## ğŸ¨ INTERFACE UNIFIÃ‰E - Design

### Header avec DÃ©tection de RÃ´le

```jsx
// En haut de page, badge indique le rÃ´le de l'utilisateur
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Retour   [Badge: Vous Ãªtes ACHETEUR]    TF-20251029 â”‚
â”‚                                                         â”‚
â”‚ Dossier d'achat - Parcelle "Terrain Almadies 500mÂ²"   â”‚
â”‚ Status: [ğŸŸ¡ En cours] â€¢ Notaire assignÃ©                â”‚
â”‚                                                         â”‚
â”‚ ğŸ‘¥ PARTICIPANTS:                                       â”‚
â”‚  ğŸ‘¤ Acheteur: Jean Dupont                              â”‚
â”‚  ğŸ˜ï¸ Vendeur: Marie Sow                                â”‚
â”‚  âš–ï¸ Notaire: MaÃ®tre Diop (Ã‰tude Diop)                 â”‚
â”‚  ğŸ¢ Agent: Teranga Immo (5%)                           â”‚
â”‚  ğŸ“ GÃ©omÃ¨tre: Cabinet Ndiaye                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tabs Conditionnels selon RÃ´le

```jsx
<Tabs defaultValue="overview">
  <TabsList>
    <TabsTrigger value="overview">Vue d'ensemble</TabsTrigger>
    <TabsTrigger value="timeline">Progression</TabsTrigger>
    <TabsTrigger value="documents">Documents</TabsTrigger>
    <TabsTrigger value="messages">Messages</TabsTrigger>
    <TabsTrigger value="payments">Paiements</TabsTrigger>
    
    {/* Conditionnel ACHETEUR */}
    {userRole === 'buyer' && (
      <TabsTrigger value="financing">Financement</TabsTrigger>
    )}
    
    {/* Conditionnel NOTAIRE */}
    {userRole === 'notaire' && (
      <TabsTrigger value="legal">Juridique</TabsTrigger>
    )}
    
    {/* Conditionnel GÃ‰OMÃˆTRE */}
    {userRole === 'geometre' && (
      <TabsTrigger value="surveying">Bornage</TabsTrigger>
    )}
  </TabsList>
</Tabs>
```

### Vue d'ensemble (Pour TOUS)

```jsx
<Card>
  <CardHeader>
    <CardTitle>Informations Dossier</CardTitle>
  </CardHeader>
  <CardContent>
    <div className="grid grid-cols-3 gap-4">
      {/* Parcelle */}
      <div>
        <Label>Parcelle</Label>
        <p>Almadies, Dakar</p>
        <p>500 mÂ² â€¢ TF NÂ° 12345/DAK</p>
      </div>
      
      {/* Prix */}
      <div>
        <Label>Prix convenu</Label>
        <p className="text-2xl font-bold">50 000 000 FCFA</p>
      </div>
      
      {/* Phase */}
      <div>
        <Label>Phase actuelle</Label>
        <Badge>Document audit</Badge>
        <Progress value={60} className="mt-2" />
      </div>
    </div>
    
    {/* Participants - Visible par TOUS */}
    <Separator className="my-4" />
    
    <div className="grid grid-cols-2 md:grid-cols-5 gap-4">
      {/* Acheteur */}
      <Card>
        <CardContent className="p-4 text-center">
          <Avatar>
            <AvatarImage src={buyer.avatar} />
            <AvatarFallback>ğŸ‘¤</AvatarFallback>
          </Avatar>
          <p className="font-semibold mt-2">Jean Dupont</p>
          <Badge variant="outline">Acheteur</Badge>
          <div className="mt-2 space-y-1 text-sm">
            <p>ğŸ“§ {buyer.email}</p>
            <p>ğŸ“ {buyer.phone}</p>
          </div>
        </CardContent>
      </Card>
      
      {/* Vendeur */}
      <Card>
        <CardContent className="p-4 text-center">
          <Avatar>
            <AvatarImage src={seller.avatar} />
            <AvatarFallback>ğŸ˜ï¸</AvatarFallback>
          </Avatar>
          <p className="font-semibold mt-2">Marie Sow</p>
          <Badge variant="outline">Vendeur</Badge>
          <div className="mt-2 space-y-1 text-sm">
            <p>ğŸ“§ {seller.email}</p>
            <p>ğŸ“ {seller.phone}</p>
          </div>
        </CardContent>
      </Card>
      
      {/* Notaire */}
      {notaire && (
        <Card>
          <CardContent className="p-4 text-center">
            <Avatar>
              <AvatarImage src={notaire.avatar} />
              <AvatarFallback>âš–ï¸</AvatarFallback>
            </Avatar>
            <p className="font-semibold mt-2">MaÃ®tre Diop</p>
            <Badge variant="outline">Notaire</Badge>
            <p className="text-xs mt-1">Ã‰tude Diop</p>
            <div className="mt-2 space-y-1 text-sm">
              <p>ğŸ“§ {notaire.email}</p>
              <p>ğŸ“ {notaire.phone}</p>
            </div>
          </CardContent>
        </Card>
      )}
      
      {/* Agent Foncier - FACULTATIF */}
      {purchaseCase.has_agent && agent && (
        <Card className="border-dashed">
          <CardContent className="p-4 text-center">
            <Avatar>
              <AvatarImage src={agent.avatar} />
              <AvatarFallback>ğŸ¢</AvatarFallback>
            </Avatar>
            <p className="font-semibold mt-2">{agent.agency_name}</p>
            <Badge variant="outline">Agent</Badge>
            <Badge variant="secondary" className="text-xs mt-1">Facultatif</Badge>
            <p className="text-xs mt-1">Commission: 5%</p>
            <div className="mt-2 space-y-1 text-sm">
              <p>ğŸ“§ {agent.email}</p>
              <p>ğŸ“ {agent.phone}</p>
            </div>
          </CardContent>
        </Card>
      )}
      
      {/* GÃ©omÃ¨tre - FACULTATIF */}
      {purchaseCase.has_surveying && geometre && (
        <Card className="border-dashed">
          <CardContent className="p-4 text-center">
            <Avatar>
              <AvatarImage src={geometre.avatar} />
              <AvatarFallback>ğŸ“</AvatarFallback>
            </Avatar>
            <p className="font-semibold mt-2">{geometre.cabinet_name}</p>
            <Badge variant="outline">GÃ©omÃ¨tre</Badge>
            <Badge variant="secondary" className="text-xs mt-1">Facultatif</Badge>
            <p className="text-xs mt-1">
              {surveyingMission?.status === 'completed' ? 'âœ… Bornage OK' : 'â³ En cours'}
            </p>
            <div className="mt-2 space-y-1 text-sm">
              <p>ğŸ“§ {geometre.email}</p>
              <p>ğŸ“ {geometre.phone}</p>
            </div>
          </CardContent>
        </Card>
      )}
    </div>
  </CardContent>
</Card>
```

---

## ğŸ“‹ ACTIONS SPÃ‰CIFIQUES PAR RÃ”LE

### Actions ACHETEUR ğŸ‘¤

```jsx
<Card>
  <CardHeader>
    <CardTitle>Vos actions</CardTitle>
  </CardHeader>
  <CardContent>
    <div className="space-y-2">
      {/* Choix facultatifs (Phase 0) */}
      {!purchaseCase.has_agent && (
        <Button onClick={chooseAgent} variant="outline">
          ğŸ¢ Choisir un agent foncier (Facultatif)
        </Button>
      )}
      
      {!purchaseCase.has_surveying && (
        <Button onClick={requestSurveying} variant="outline">
          ğŸ“ Commander un bornage (Facultatif)
        </Button>
      )}
      
      <Separator />
      
      {/* Actions principales */}
      <Button onClick={uploadDocument}>
        ğŸ“¤ Uploader mes piÃ¨ces d'identitÃ©
      </Button>
      <Button onClick={viewContract}>
        ğŸ“„ Consulter projet de contrat
      </Button>
      <Button onClick={payDeposit}>
        ğŸ’° Payer acompte (10-20%)
      </Button>
      <Button onClick={confirmAppointment}>
        âœ… Confirmer RDV signature
      </Button>
    </div>
  </CardContent>
</Card>
```

### Actions VENDEUR ğŸ˜ï¸

```jsx
<Card>
  <CardHeader>
    <CardTitle>Vos actions</CardTitle>
  </CardHeader>
  <CardContent>
    <div className="space-y-2">
      <Button onClick={uploadTitreFoncier}>
        ğŸ“„ Uploader titre foncier
      </Button>
      {purchaseCase.has_surveying && (
        <Badge variant="secondary">
          â„¹ï¸ Bornage demandÃ© par l'acheteur
        </Badge>
      )}
      <Button onClick={approveContract}>
        âœ… Valider contrat proposÃ©
      </Button>
      <Button onClick={confirmAppointment}>
        ğŸ“… Confirmer RDV signature
      </Button>
    </div>
  </CardContent>
</Card>
```

### Actions NOTAIRE âš–ï¸

```jsx
<Card>
  <CardHeader>
    <CardTitle>Vos actions notariales</CardTitle>
  </CardHeader>
  <CardContent>
    <div className="space-y-2">
      <Button onClick={verifyIdentities}>
        ğŸ” VÃ©rifier identitÃ©s
      </Button>
      <Button onClick={checkTitreFoncier}>
        ğŸ“‹ ContrÃ´ler titre foncier au cadastre
      </Button>
      <Button onClick={generateContract}>
        ğŸ“ GÃ©nÃ©rer acte de vente
      </Button>
      <Button onClick={proposeAppointments}>
        ğŸ“… Proposer dates RDV
      </Button>
      <Button onClick={confirmPaymentReceived}>
        âœ… Confirmer rÃ©ception honoraires
      </Button>
      <Button onClick={registerAct}>
        ğŸ“„ Enregistrer acte aux impÃ´ts
      </Button>
    </div>
  </CardContent>
</Card>
```

### Actions AGENT FONCIER ğŸ¢ (Si choisi par l'acheteur)

```jsx
{purchaseCase.has_agent && userRole === 'agent' && (
  <Card>
    <CardHeader>
      <CardTitle>Vos actions agent</CardTitle>
      <CardDescription>
        Vous avez Ã©tÃ© choisi par l'acheteur pour faciliter cette transaction
      </CardDescription>
    </CardHeader>
    <CardContent>
      <div className="space-y-2">
        <Button onClick={facilitateNegotiation}>
          ğŸ’¬ Faciliter nÃ©gociation
        </Button>
        <Button onClick={collectDocuments}>
          ğŸ“‹ Collecter documents manquants
        </Button>
        <Button onClick={trackCommission}>
          ğŸ’° Suivre commission (5%)
        </Button>
        <Button onClick={confirmCommissionReceived}>
          âœ… Confirmer paiement commission
        </Button>
      </div>
    </CardContent>
  </Card>
)}
```

### Actions GÃ‰OMÃˆTRE ğŸ“ (Si mission demandÃ©e par l'acheteur)

```jsx
{purchaseCase.has_surveying && userRole === 'geometre' && (
  <Card>
    <CardHeader>
      <CardTitle>Mission de bornage</CardTitle>
      <CardDescription>
        L'acheteur a demandÃ© une vÃ©rification du bornage de la parcelle
      </CardDescription>
    </CardHeader>
    <CardContent>
      <div className="space-y-4">
        {/* Status mission */}
        <div>
          <Label>Status</Label>
          <Badge>{surveyingMission.status}</Badge>
        </div>
        
        {/* Actions */}
        <div className="space-y-2">
          <Button onClick={acceptMission}>
            âœ… Accepter mission
          </Button>
          <Button onClick={scheduleVisit}>
            ğŸ“… Planifier visite terrain
          </Button>
          <Button onClick={uploadPlan}>
            ğŸ“¤ Uploader plan de bornage
          </Button>
          <Button onClick={uploadCertificate}>
            ğŸ“„ Uploader certificat topographique
          </Button>
          <Button onClick={enterGPSCoordinates}>
            ğŸ“ Saisir coordonnÃ©es GPS
          </Button>
          <Button onClick={generateInvoice}>
            ğŸ’° GÃ©nÃ©rer facture
          </Button>
          <Button onClick={completeMission}>
            âœ… ClÃ´turer mission
          </Button>
        </div>
      </div>
    </CardContent>
  </Card>
)}
```

---

## ğŸ’¬ MESSAGERIE MULTI-ACTEURS

```jsx
<Card>
  <CardHeader>
    <CardTitle>Messages (5 participants)</CardTitle>
  </CardHeader>
  <CardContent>
    {/* Liste messages avec avatar + rÃ´le */}
    <ScrollArea className="h-96">
      {messages.map(msg => (
        <div key={msg.id} className="flex gap-3 mb-4">
          <Avatar>
            <AvatarImage src={msg.sender.avatar} />
            <AvatarFallback>{msg.sender.role_icon}</AvatarFallback>
          </Avatar>
          <div className="flex-1">
            <div className="flex items-center gap-2">
              <span className="font-semibold">{msg.sender.name}</span>
              <Badge variant="outline">{msg.sender.role}</Badge>
              <span className="text-xs text-muted">{msg.time}</span>
            </div>
            <p className="mt-1">{msg.content}</p>
          </div>
        </div>
      ))}
    </ScrollArea>
    
    {/* Envoi message */}
    <div className="mt-4 flex gap-2">
      <Textarea 
        placeholder="Votre message Ã  tous les participants..."
        value={newMessage}
        onChange={e => setNewMessage(e.target.value)}
      />
      <Button onClick={sendMessage}>
        <Send className="w-4 h-4" />
      </Button>
    </div>
  </CardContent>
</Card>
```

---

## ğŸ¯ PROCHAINES Ã‰TAPES

### 1. Migrations SQL (1h)
- Ajouter colonnes `agent_foncier_id`, `geometre_id`
- CrÃ©er `agent_foncier_profiles`
- CrÃ©er `geometre_profiles`
- CrÃ©er `surveying_missions`

### 2. Service UnifiedCaseTrackingService.js (2h)
- MÃ©thode `getCaseWithAllParticipants(caseId, userId)`
- DÃ©tecte rÃ´le utilisateur
- Charge donnÃ©es selon rÃ´le
- Permissions diffÃ©renciÃ©es

### 3. Composant UnifiedCaseTracking.jsx (4h)
- DÃ©tection automatique du rÃ´le
- Interface adaptative
- Actions conditionnelles
- Messagerie multi-acteurs

### 4. Tests (2h)
- Tester avec chaque rÃ´le
- VÃ©rifier permissions
- Tester messagerie
- Tester notifications

**Total estimÃ©**: ~9h de dÃ©veloppement

---

**Voulez-vous que je commence par crÃ©er les migrations SQL et le service ?** ğŸš€
