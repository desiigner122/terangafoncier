/**
 * Premium AI Chatbot Service
 * Advanced response generation with context awareness
 * Latest AI features and domain expertise
 * @date October 17, 2025
 */

export class PremiumAIService {
  /**
   * Comprehensive Knowledge Base
   */
  static knowledgeBase = {
    // Achat & Vente
    'achat': `ğŸ  **Guide Complet d'Achat - Teranga Foncier**

**6 Ã‰tapes du Processus:**

1ï¸âƒ£ **EXPLORATION (2-5 jours)**
   â€¢ Filtrez par zone (Almadies, Ngor, Dakar, etc)
   â€¢ Prix: 5M - 500M+ FCFA
   â€¢ Surface: Petits Ã  grandes parcelles
   â€¢ Type: Terrain, maison, villa
   âœ Utilisez: Cartes interactives, filtres IA

2ï¸âƒ£ **VISITE (1-3 jours)**
   â€¢ Virtuelle 360Â°: Gratuit, 24/7
   â€¢ Drone aÃ©rienne: Vue complÃ¨te
   â€¢ Visite physique: Agent local
   â€¢ Chat propriÃ©taire: Questions directes
   âœ Conseil: Comparez 3+ propriÃ©tÃ©s

3ï¸âƒ£ **OFFRE SÃ‰CURISÃ‰E (1 jour)**
   â€¢ Proposez votre meilleure offre
   â€¢ NÃ©gociation transparente
   â€¢ Contrat prÃ©-prÃ©parÃ©
   â€¢ Signature e-legitimÃ©e
   âœ Tarif: 2-5% nÃ©gociation possible

4ï¸âƒ£ **VÃ‰RIFICATION (5-7 jours)**
   â€¢ Audit juridique complet
   â€¢ VÃ©rif cadastrale
   â€¢ Documents authentifiÃ©s
   â€¢ Absence de litiges
   âœ Garanti par Teranga: 0 risque

5ï¸âƒ£ **FINANCEMENT (3-5 jours)**
   â€¢ Comptant: 5-10% rÃ©duction
   â€¢ Ã‰chelonnÃ©: 3-12 mois
   â€¢ Bancaire: 5-8% intÃ©rÃªt
   â€¢ International: Sans limite
   âœ Nos partenaires: SGBS, CBAO

6ï¸âƒ£ **CLÃ”TURE (1-3 jours)**
   â€¢ Contrat notariÃ© electronique
   â€¢ Signature blockchain
   â€¢ NFT propriÃ©tÃ© remis
   â€¢ Certificats fournis
   âœ Valeur lÃ©gale 100%

**DurÃ©e Totale:** 15-30 jours
**vs Traditionnel:** 3-6 mois
**Gain de Temps:** 80% plus rapide`,

    'vente': `ğŸ“¤ **Vendre Rapidement & SÃ©curisÃ©**

**Pourquoi vendre avec Teranga?**
âœ… 50,000+ acheteurs potentiels
âœ… Commission basse: 2-3%
âœ… VÃ©rification complÃ¨te
âœ… Paiement garanti par escrow
âœ… NFT pour visibilitÃ© blockchain

**Votre Processus:**
1. Listez votre bien (gratuit)
2. Photos/drone/description
3. Recevez des offres
4. NÃ©gociez directement
5. Nous gÃ©rons contrats & lÃ©gal
6. Vous recevez paiement

**DurÃ©e moyenne:** 7-14 jours
**Frais:** Transparents et fixes`,

    'financement': `ğŸ’° **4 Modes de Paiement - Trouvez Votre Match**

**MODE 1: COMPTANT** ğŸ’µ
â”œâ”€ Avantages:
â”‚  â€¢ Meilleur prix (-5-10%)
â”‚  â€¢ ClÃ´ture rapide (5 jours)
â”‚  â€¢ Aucune documentation
â”‚  â€¢ Transfert direct
â”œâ”€ Public: Investisseurs riches
â””â”€ Temps: 5 jours total

**MODE 2: Ã‰CHELONNÃ‰** ğŸ“…
â”œâ”€ Avantages:
â”‚  â€¢ Flexible: 3-12 mois
â”‚  â€¢ 30-70% avance
â”‚  â€¢ ZÃ©ro intÃ©rÃªt
â”‚  â€¢ Contrat garanti
â”œâ”€ Public: Particuliers prudents
â””â”€ Temps: 15 jours total

**MODE 3: BANCAIRE** ğŸ¦
â”œâ”€ Taux: 5-8%
â”œâ”€ DurÃ©e: 5-20 ans
â”œâ”€ Montant: Jusqu'Ã  80%
â”œâ”€ Partenaires:
â”‚  â€¢ SGBS SÃ©nÃ©gal
â”‚  â€¢ CBAO
â”‚  â€¢ Nsia Bank
â”‚  â€¢ Ecobank
â”œâ”€ Approbation: 2-5 jours
â””â”€ Public: Classe moyenne

**MODE 4: DIASPORA** ğŸŒ
â”œâ”€ Avantages:
â”‚  â€¢ Sans limite montant
â”‚  â€¢ Taux fix favorable
â”‚  â€¢ Transfer instantanÃ©
â”‚  â€¢ Support multilingue 24/7
â”œâ”€ Moyens: Swift, Wise, Crypto
â””â”€ Public: Diaspora mondiale`,

    'diaspora': `ğŸŒ **Solutions SpÃ©ciales pour la Diaspora**

**Le RÃªve:** PossÃ©der au SÃ©nÃ©gal depuis l'Ã©tranger
**L'Obstacle:** Distance, confiance, frais, paperasse
**Notre Solution:** Tout gÃ©rÃ© Ã©lectroniquement

**Ã‰TAPE 1: SELECTION A DISTANCE**
â”œâ”€ Visites 360Â° virtuelles
â”œâ”€ Drone vidÃ©o aÃ©rienne
â”œâ”€ Chat direct propriÃ©taire
â”œâ”€ Avis communautÃ© Teranga
â””â”€ âœ DÃ©cidez de chez vous!

**Ã‰TAPE 2: PROCURATION NUMERIQUE**
â”œâ”€ Signature e-legitimÃ©e
â”œâ”€ Agent Teranga autorisÃ©
â”œâ”€ Valeur lÃ©gale certifiÃ©e
â”œâ”€ RÃ©vocable Ã  tout moment
â””â”€ âœ Nous agissons en votre nom

**Ã‰TAPE 3: TRANSFERT SECURISE**
â”œâ”€ Nos partenaires bancaires
â”œâ”€ Crypto accepted (USDC, BTC)
â”œâ”€ ZÃ©ro frais Teranga
â”œâ”€ Meilleur taux du marchÃ©
â””â”€ âœ Votre argent en sÃ©curitÃ©

**Ã‰TAPE 4: GESTION SUR PLACE**
â”œâ”€ Maintenance/entretien
â”œâ”€ Location management
â”œâ”€ Paiement taxes
â”œâ”€ Rapports mensuels
â””â”€ âœ Comme si vous Ã©tiez lÃ 

**Ã‰TAPE 5: INVESTISSEMENT LONG-TERME**
â”œâ”€ Valorisation immobiliÃ¨re
â”œâ”€ Revenus locatifs
â”œâ”€ Patrimoine stable
â”œâ”€ Legs aux enfants
â””â”€ âœ SÃ©curisez votre avenir

**CoÃ»ts:** 2-3% du prix (tout inclus)
**Support:** +221 77 593 42 41 / 24h`,

    'blockchain': `â›“ï¸ **Technologie Blockchain - RÃ©volution ImmobiliÃ¨re**

**POURQUOI BLOCKCHAIN?**
ğŸ” Immuable: Impossible Ã  modifier/falsifier
ğŸ“œ Transparent: Tous les contrats vÃ©rifiables
âš¡ Rapide: Transactions en minutes
ğŸ’¾ Permanent: Histoire complÃ¨te tracÃ©e
ğŸŒ Mondial: Accessible de partout

**NOTRE ARCHITECTURE:**
â”œâ”€ RÃ©seau: Ethereum + Layer 2 Custom
â”œâ”€ Consensus: Proof of Authority
â”œâ”€ Contrats: Solidity (Certora audit)
â”œâ”€ Oracles: Chainlink pour prix rÃ©els
â”œâ”€ SÃ©curitÃ©: OpenZeppelin standards
â””â”€ Certificats: TerangaNFT pour chaque propriÃ©tÃ©

**COMMENT Ã‡A MARCHE:**
1. Vous achetez terrain (50M FCFA)
2. ReÃ§u comme NFT sur votre wallet
3. PropriÃ©tÃ© attestÃ©e par blockchain
4. TransfÃ©rable numÃ©riquement
5. Reconnaissance lÃ©gale SÃ©nÃ©gal

**AVANTAGES NFT:**
âœ… Vendre en 24h (pas 2 semaines)
âœ… Directement, sans agent
âœ… Frais minimes (0.5%)
âœ… Acheteur global
âœ… Signature automatique`,

    'securite': `ğŸ”’ **SÃ©curitÃ© Juridique - Notre Garantie**

**VERIFICATION COMPLETE:**
âœ“ Titre propriÃ©tÃ© authentique
âœ“ Extrait cadastral vÃ©rifiÃ©
âœ“ Pas de litiges enregistrÃ©s
âœ“ Pas d'hypothÃ¨ques actives
âœ“ DÃ©clarations d'impÃ´ts OK
âœ“ Accord urbanisme + mairie
âœ“ Photo-identitÃ© vendeur vÃ©rifiÃ©e

**DOCUMENTS REMIS:**
1. Extrait cadastral certifiÃ©
2. Registre hypothÃ©caire
3. Rapport audit juridique
4. Certificat non-opposition
5. Contrat blockchain
6. NFT propriÃ©tÃ©
7. Assurance titulature

**SIGNATURES ELECTRONIQUES:**
â”œâ”€ Notaire e-legitimÃ©
â”œâ”€ Signature RSA 2048-bit
â”œâ”€ Timestamp blockchain
â”œâ”€ Valeur lÃ©gale 100%
â””â”€ Reconnaissance gouvernement

**GARANTIES TERANGA:**
ğŸ›¡ï¸ Garantie titulature: 10 ans
ğŸ›¡ï¸ Assurance risque juridique
ğŸ›¡ï¸ Support lÃ©gal gratuit 1 an
ğŸ›¡ï¸ Remboursement intÃ©gral si problÃ¨me`,

    'support': `ğŸ“ **Comment Nous Contacter - Support 24/7**

**CHAT EN DIRECT** ğŸ’¬
â”œâ”€ Disponible 24h/24, 7j/7
â”œâ”€ RÃ©ponse < 2 minutes
â”œâ”€ IA + agents humains
â””â”€ âœ Cliquez le bouton chat!

**TELEPHONE** â˜ï¸
â”œâ”€ +221 77 593 42 41
â”œâ”€ FranÃ§ais/Anglais/Wolof
â”œâ”€ Lun-Sam: 8h-20h
â””â”€ Urgences: 24h

**EMAIL** ğŸ“§
â”œâ”€ palaye122@gmail.com
â”œâ”€ RÃ©ponse: 2-4 heures
â”œâ”€ Documenter votre cas
â””â”€ RÃ©ponse dÃ©taillÃ©e garantie

**FAQ & RESSOURCES** ğŸ“š
â”œâ”€ Guide achat complet
â”œâ”€ FAQ 50+ questions
â”œâ”€ Tutoriels vidÃ©o
â”œâ”€ Blog expertise
â””â”€ âœ Consultez le site

**AGENTS LOCAUX** ğŸ‘·
â”œâ”€ Terrains sur place
â”œâ”€ Inspections physiques
â”œâ”€ Accompagnement visites
â”œâ”€ NÃ©gotiations live`
  };

  /**
   * Generate response based on query
   */
  static generateResponse(query) {
    const queryLower = query.toLowerCase();

    // Check each topic
    for (const [topic, content] of Object.entries(this.knowledgeBase)) {
      const keywords = this.getKeywords(topic);
      if (keywords.some(kw => queryLower.includes(kw))) {
        return content;
      }
    }

    // Default: General help
    return `Bonjour! ğŸ‘‹

Je suis votre assistant IA Teranga Foncier, prÃªt Ã  rÃ©pondre Ã  vos questions sur:

âœ… **Achat de terrains** - Guide complet du processus
âœ… **Vente de propriÃ©tÃ©s** - Vendez rapidement & sÃ»r
âœ… **Financement** - 4 modes de paiement disponibles
âœ… **Diaspora** - Solutions pour investir de loin
âœ… **Blockchain** - Technologie sÃ©curisÃ©e NFT
âœ… **SÃ©curitÃ© juridique** - VÃ©rification complÃ¨te garantie
âœ… **Support** - Nous sommes lÃ  pour vous 24/7

**Que puis-je vous aider?** Posez votre question!`;
  }

  /**
   * Get keywords for each topic
   */
  static getKeywords(topic) {
    const keywords = {
      achat: ['achat', 'buy', 'acheter', 'offre', 'proposer', 'acquisition'],
      vente: ['vendre', 'sell', 'listing', 'vente', 'property', 'propriÃ©tÃ©'],
      financement: ['paiement', 'financing', 'crÃ©dit', 'loan', 'taux', 'bankfinance', 'comptant', 'Ã©chelonnÃ©'],
      diaspora: ['diaspora', 'abroad', 'Ã©tranger', 'international', 'france', 'canada', 'usa', 'loin'],
      blockchain: ['blockchain', 'nft', 'crypto', 'web3', 'contrat', 'contract', 'ethereum'],
      securite: ['sÃ©curitÃ©', 'juridique', 'lÃ©gal', 'verification', 'documents', 'authentique', 'titre'],
      support: ['support', 'contact', 'phone', 'email', 'help', 'aide', 'assistance']
    };

    return keywords[topic] || [];
  }

  /**
   * Get quick reply suggestions
   */
  static getQuickReplies(context = 'default') {
    const replies = {
      default: [
        'ğŸ’° Comment acheter un terrain?',
        'ğŸ¦ Options de financement',
        'ğŸŒ Diaspora - Acheter de loin',
        'â›“ï¸ Blockchain & NFT',
        'â“ Plus de questions'
      ],
      buying: [
        'ğŸ’° Meilleur prix?',
        'â±ï¸ Combien de temps?',
        'ğŸ”’ Est-ce sÃ»r?',
        'ğŸ“ Parler Ã  un agent',
        'ğŸ  Voir d\'autres terrains'
      ],
      financing: [
        'ğŸ“… Paiement Ã©chelonnÃ©',
        'ğŸ¦ CrÃ©dit bancaire',
        'ğŸ’µ Comptant vs Ã‰chelonnÃ©',
        'ğŸŒ International transfer',
        'ğŸ’¬ Conseiller financier'
      ]
    };

    return replies[context] || replies.default;
  }

  /**
   * Sentiment analysis (basic)
   */
  static analyzeSentiment(message) {
    const positive = /merci|excellent|super|bien|oui|ok|d'accord/i;
    const negative = /non|mauvais|problÃ¨me|erreur|Ã§a marche pas/i;
    const urgent = /urgent|rapidement|help|sÃ©curitÃ©|problÃ¨me/i;

    if (urgent.test(message)) return 'urgent';
    if (positive.test(message)) return 'satisfied';
    if (negative.test(message)) return 'unsatisfied';
    return 'neutral';
  }
}

export default PremiumAIService;
